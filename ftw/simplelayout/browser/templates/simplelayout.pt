<html xmlns:metal="http://xml.zope.org/namespaces/metal"
      xmlns:tal="http://xml.zope.org/namespaces/tal"
      metal:use-macro="context/main_template/macros/master"
      xmlns:i18n="http://xml.zope.org/namespaces/i18n"
      i18n:domain="ftw.simplelayout">


<div metal:fill-slot="head_slot">

</div>

    <div metal:fill-slot="content-core">
        <a href="#" class="add-block-link">Add Block</a>
        <div class="simplelayout">
            <tal:blocks repeat="block view/get_blocks">
                <div class="sl-block"
                     tal:attributes="data-uuid block/uuid;
                                     style block/style">

                    <ul tal:condition="block/editable"
                        class="sl-controls">
                        <li class="sl-edit">
                            <a tal:attributes="href string:${block/block/absolute_url}/edit"
                               i18n:translate="">Edit</a>
                        </li>

                        <li class="sl-delete">
                            <a tal:attributes="href string:${block/block/absolute_url}/delete_confirmation"
                               i18n:translate="">Delete</a>
                        </li>

                        <li class="seperator"><!-- --></li>

                        <li tal:condition="block/available_views"
                            tal:repeat="view block/available_views"
                            tal:attributes="class string:sl-view-${view/name}"
                            tal:content="view/label" />

                    </ul>
                    <div class="block-wrapper">
                      <div tal:replace="structure block/view" />
                    </div>
                </div>
            </tal:blocks>
        </div>

        <script type="text/javascript">

          $(function(){
            $('.simplelayout').simplelayout('init', {'columns': 2}).simplelayout('layout');
          });
        </script>

    </div>
</html>
