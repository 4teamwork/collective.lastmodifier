/**
 * @license almond 0.3.1 Copyright (c) 2011-2014, The Dojo Foundation All Rights Reserved.
 * Available via the MIT or new BSD license.
 * see: http://github.com/jrburke/almond for details
 */

/*!
 * EventEmitter v4.2.11 - git.io/ee
 * Unlicense - http://unlicense.org/
 * Oliver Caldwell - http://oli.me.uk/
 * @preserve
 */

/*! JsRender v1.0.0-rc.65 (Beta - Release Candidate): http://jsviews.com/#jsrender */

/*! **VERSION FOR WEB** (For NODE.JS see http://jsviews.com/download/jsrender-node.js) */

(function(e,t){e.Simplelayout=t().simplelayout,e.Toolbox=t().toolbox})(this,function(){var requirejs,require,define;return function(e){function h(e,t){return f.call(e,t)}function p(e,t){var n,r,i,s,o,a,f,l,h,p,d,v=t&&t.split("/"),m=u.map,g=m&&m["*"]||{};if(e&&e.charAt(0)===".")if(t){e=e.split("/"),o=e.length-1,u.nodeIdCompat&&c.test(e[o])&&(e[o]=e[o].replace(c,"")),e=v.slice(0,v.length-1).concat(e);for(h=0;h<e.length;h+=1){d=e[h];if(d===".")e.splice(h,1),h-=1;else if(d===".."){if(h===1&&(e[2]===".."||e[0]===".."))break;h>0&&(e.splice(h-1,2),h-=2)}}e=e.join("/")}else e.indexOf("./")===0&&(e=e.substring(2));if((v||g)&&m){n=e.split("/");for(h=n.length;h>0;h-=1){r=n.slice(0,h).join("/");if(v)for(p=v.length;p>0;p-=1){i=m[v.slice(0,p).join("/")];if(i){i=i[r];if(i){s=i,a=h;break}}}if(s)break;!f&&g&&g[r]&&(f=g[r],l=h)}!s&&f&&(s=f,a=l),s&&(n.splice(0,a,s),e=n.join("/"))}return e}function d(t,r){return function(){var i=l.call(arguments,0);return typeof i[0]!="string"&&i.length===1&&i.push(null),n.apply(e,i.concat([t,r]))}}function v(e){return function(t){return p(t,e)}}function m(e){return function(t){s[e]=t}}function g(n){if(h(o,n)){var r=o[n];delete o[n],a[n]=!0,t.apply(e,r)}if(!h(s,n)&&!h(a,n))throw new Error("No "+n);return s[n]}function y(e){var t,n=e?e.indexOf("!"):-1;return n>-1&&(t=e.substring(0,n),e=e.substring(n+1,e.length)),[t,e]}function b(e){return function(){return u&&u.config&&u.config[e]||{}}}var t,n,r,i,s={},o={},u={},a={},f=Object.prototype.hasOwnProperty,l=[].slice,c=/\.js$/;r=function(e,t){var n,r=y(e),i=r[0];return e=r[1],i&&(i=p(i,t),n=g(i)),i?n&&n.normalize?e=n.normalize(e,v(t)):e=p(e,t):(e=p(e,t),r=y(e),i=r[0],e=r[1],i&&(n=g(i))),{f:i?i+"!"+e:e,n:e,pr:i,p:n}},i={require:function(e){return d(e)},exports:function(e){var t=s[e];return typeof t!="undefined"?t:s[e]={}},module:function(e){return{id:e,uri:"",exports:s[e],config:b(e)}}},t=function(t,n,u,f){var l,c,p,v,y,b=[],w=typeof u,E;f=f||t;if(w==="undefined"||w==="function"){n=!n.length&&u.length?["require","exports","module"]:n;for(y=0;y<n.length;y+=1){v=r(n[y],f),c=v.f;if(c==="require")b[y]=i.require(t);else if(c==="exports")b[y]=i.exports(t),E=!0;else if(c==="module")l=b[y]=i.module(t);else if(h(s,c)||h(o,c)||h(a,c))b[y]=g(c);else{if(!v.p)throw new Error(t+" missing "+c);v.p.load(v.n,d(f,!0),m(c),{}),b[y]=s[c]}}p=u?u.apply(s[t],b):undefined;if(t)if(l&&l.exports!==e&&l.exports!==s[t])s[t]=l.exports;else if(p!==e||!E)s[t]=p}else t&&(s[t]=u)},requirejs=require=n=function(s,o,a,f,l){if(typeof s=="string")return i[s]?i[s](o):g(r(s,o).f);if(!s.splice){u=s,u.deps&&n(u.deps,u.callback);if(!o)return;o.splice?(s=o,o=a,a=null):s=e}return o=o||function(){},typeof a=="function"&&(a=f,f=l),f?t(e,s,o,a):setTimeout(function(){t(e,s,o,a)},4),n},n.config=function(e){return n(e)},requirejs._defined=s,define=function(e,t,n){if(typeof e!="string")throw new Error("See almond README: incorrect module build, no module name");t.splice||(n=t,t=[]),!h(s,e)&&!h(o,e)&&(o[e]=[e,t,n])},define.amd={jQuery:!0}}(),define("almond/almond",function(){}),function(){"use strict";function e(){}function t(e,t){for(var n=e.length;n--;)if(e[n].listener===t)return n;return-1}function n(e){return function(){return this[e].apply(this,arguments)}}var r=e.prototype,i=this,s=i.EventEmitter;r.getListeners=function(e){var t,n,r=this._getEvents();if(e instanceof RegExp){t={};for(n in r)r.hasOwnProperty(n)&&e.test(n)&&(t[n]=r[n])}else t=r[e]||(r[e]=[]);return t},r.flattenListeners=function(e){var t,n=[];for(t=0;t<e.length;t+=1)n.push(e[t].listener);return n},r.getListenersAsObject=function(e){var t,n=this.getListeners(e);return n instanceof Array&&(t={},t[e]=n),t||n},r.addListener=function(e,n){var r,i=this.getListenersAsObject(e),s="object"==typeof n;for(r in i)i.hasOwnProperty(r)&&-1===t(i[r],n)&&i[r].push(s?n:{listener:n,once:!1});return this},r.on=n("addListener"),r.addOnceListener=function(e,t){return this.addListener(e,{listener:t,once:!0})},r.once=n("addOnceListener"),r.defineEvent=function(e){return this.getListeners(e),this},r.defineEvents=function(e){for(var t=0;t<e.length;t+=1)this.defineEvent(e[t]);return this},r.removeListener=function(e,n){var r,i,s=this.getListenersAsObject(e);for(i in s)s.hasOwnProperty(i)&&(r=t(s[i],n),-1!==r&&s[i].splice(r,1));return this},r.off=n("removeListener"),r.addListeners=function(e,t){return this.manipulateListeners(!1,e,t)},r.removeListeners=function(e,t){return this.manipulateListeners(!0,e,t)},r.manipulateListeners=function(e,t,n){var r,i,s=e?this.removeListener:this.addListener,o=e?this.removeListeners:this.addListeners;if("object"!=typeof t||t instanceof RegExp)for(r=n.length;r--;)s.call(this,t,n[r]);else for(r in t)t.hasOwnProperty(r)&&(i=t[r])&&("function"==typeof i?s.call(this,r,i):o.call(this,r,i));return this},r.removeEvent=function(e){var t,n=typeof e,r=this._getEvents();if("string"===n)delete r[e];else if(e instanceof RegExp)for(t in r)r.hasOwnProperty(t)&&e.test(t)&&delete r[t];else delete this._events;return this},r.removeAllListeners=n("removeEvent"),r.emitEvent=function(e,t){var n,r,i,s,o=this.getListenersAsObject(e);for(i in o)if(o.hasOwnProperty(i))for(r=o[i].length;r--;)n=o[i][r],n.once===!0&&this.removeListener(e,n.listener),s=n.listener.apply(this,t||[]),s===this._getOnceReturnValue()&&this.removeListener(e,n.listener);return this},r.trigger=n("emitEvent"),r.emit=function(e){var t=Array.prototype.slice.call(arguments,1);return this.emitEvent(e,t)},r.setOnceReturnValue=function(e){return this._onceReturnValue=e,this},r._getOnceReturnValue=function(){return this.hasOwnProperty("_onceReturnValue")?this._onceReturnValue:!0},r._getEvents=function(){return this._events||(this._events={})},e.noConflict=function(){return i.EventEmitter=s,e},"function"==typeof define&&define.amd?define("EventEmitter",[],function(){return e}):"object"==typeof module&&module.exports?module.exports=e:i.EventEmitter=e}.call(this),define("app/simplelayout/EventEmitter",["EventEmitter"],function(e){"use strict";function n(){}var t=null;return n.getInstance=function(){return t===null&&(t=new e),t},n.getInstance()}),define("app/simplelayout/Block",["app/simplelayout/EventEmitter"],function(e){"use strict";function t(n,r){if(this instanceof t){var i=$.templates('<div class="iFrameFix"></div>'),s=$.templates('<div data-type="{{:type}}" class="sl-block"><div class="sl-block-content">{{:content}}</div></div>');return{committed:!1,uid:null,toolbar:null,type:r,element:null,create:function(){var e={content:n,type:r};return this.element=$(s.render(e)),this.fixFrame(),this.element},fixFrame:function(){this.frame=$(i.render()),this.element.prepend(this.frame)},enableFrame:function(){this.frame.show()},disableFrame:function(){this.frame.hide()},content:function(t){$(".sl-block-content",this.element).html(t),e.trigger("blockReplaced",[this])},commit:function(){this.committed=!0,e.trigger("blockCommitted",[this])},attachToolbar:function(e){this.toolbar=e,this.element.append(e.element)},toJSON:function(){return{uid:this.uid,type:this.type}}}}throw new TypeError("Block constructor cannot be called as a function.")}return t}),define("app/simplelayout/idHelper",[],function(){"use strict";return{generateFromHash:function(e){return $.isEmptyObject(e)?0:Math.max.apply(null,Object.keys(e))+1}}}),define("app/simplelayout/Column",["app/simplelayout/Block","app/simplelayout/EventEmitter","app/simplelayout/idHelper"],function(e,t,n){"use strict";function r(i){if(this instanceof r){if(!i)throw new Error("Columns are not defined.");var s=$.templates("<div class='sl-column sl-col-{{:column}}''></div>");return{blocks:{},element:null,create:function(){return this.element=$(s.render({column:i})),this.element},insertBlock:function(r){r=$.extend({type:"",content:""},r||{});var i=n.generateFromHash(this.blocks),s=new e(r.content,r.type),o=s.create();o.data("blockId",i),$.extend(o.data(),this.element.data());if(r.source){var u=$.extend(s.element.data(),$(r.source).data());s.element=$(r.source),$.extend(s.element.data(),u),s.type=s.element.data("type")}return this.blocks[i]=s,t.trigger("blockInserted",[s]),s},deleteBlock:function(e){if(!this.blocks[e])throw new Error("No block with id "+e+" inserted.");this.blocks[e].element.remove(),delete this.blocks[e],t.trigger("blockDeleted")},commitBlocks:function(){if(Object.keys(this.getCommittedBlocks()).length===Object.keys(this.blocks).length)throw new Error("No blocks inserted.");for(var e in this.blocks)this.blocks[e].commit()},hasBlocks:function(){return Object.keys(this.blocks).length>0},deserialize:function(){var e=this;$(".sl-block",this.element).each(function(t,n){var r=e.insertBlock({source:n});r.commit(),r.fixFrame()})},getCommittedBlocks:function(){var e=[];for(var t in this.blocks)this.blocks[t].committed&&e.push(this.blocks[t]);return e},getInsertedBlocks:function(){var e=[];for(var t in this.blocks)this.blocks[t].committed||e.push(this.blocks[t]);return e},toJSON:function(){return{blocks:this.blocks}}}}throw new TypeError("Column constructor cannot be called as a function.")}return r}),define("app/simplelayout/Layout",["app/simplelayout/Column","app/simplelayout/EventEmitter"],function(e,t){"use strict";function n(r){if(this instanceof n){if(!r)throw new TypeError("Columns are not defined.");var i=$.templates("<div class='sl-layout'></div>");return{committed:!1,columns:{},toolbar:null,create:function(t,n){this.element=$(i.render()),this.element.data("layoutId",t),this.element.data("container",n);for(var s=0;s<r;s++){var o=new e(r);this.columns[s]=o;var u=o.create();$.extend(u.data(),{columnId:s,layoutId:t,container:n}),this.element.append(u)}return this.element},insertBlock:function(e,t,n){return this.columns[e].insertBlock({content:t,type:n})},commit:function(){this.committed=!0,t.trigger("layoutCommitted",[this])},deleteBlock:function(e,t){this.columns[e].deleteBlock(t)},commitBlocks:function(e){this.columns[e].commitBlocks()},attachToolbar:function(e){this.toolbar=e,this.element.append(e.element)},getBlocks:function(){return $.map(this.columns,function(e){return $.map(e.blocks,function(e){return e})})},getCommittedBlocks:function(){var e=[];for(var t in this.columns)e=$.merge(this.columns[t].getCommittedBlocks(),e);return e},getInsertedBlocks:function(){var e=[];for(var t in this.columns)e=$.merge(this.columns[t].getInsertedBlocks(),e);return e},hasBlocks:function(){var e=!1;return $.each(this.columns,function(t,n){if(n.hasBlocks())return e=!0,!1}),e},toJSON:function(){return{columns:this.columns}},deserialize:function(){var e=this;$(".sl-column",this.element).each(function(t,n){n=$(n);var r=e.columns[t],i=r.element.data(),s=r.element.attr("class");r.element=n,r.element.attr("class",s),$.extend(r.element.data(),i),r.deserialize()})}}}throw new TypeError("Layout constructor cannot be called as a function.")}return n}),define("app/simplelayout/Layoutmanager",["app/simplelayout/Layout","app/simplelayout/EventEmitter","app/simplelayout/idHelper"],function(e,t,n){"use strict";function r(i){if(this instanceof r){var s=$.extend({width:"100%"},i||{}),o,u=0;if(s.source)o=$(s.source),o.addClass("sl-simplelayout");else{var a=$.templates("<div class='sl-simplelayout' style='width:{{:width}};''></div>");o=$(a.render(s))}return{layouts:{},options:s,element:o,attachTo:function(e){$(e).append(o)},insertLayout:function(n){n=$.extend({columns:4},n||{});var r=n.source?$(".sl-column",n.source).length:n.columns,i=new e(r);i.create(u,o.data("container"));if(n.source){var s=i.element.data();i.element=n.source,$.extend(i.element.data(),s)}return this.layouts[u]=i,t.trigger("layoutInserted",[i]),u++,i},deleteLayout:function(e){this.layouts[e].element.remove(),delete this.layouts[e],t.trigger("layoutDeleted",[this])},commitLayouts:function(){for(var e in this.layouts)this.layouts[e].commit()},getCommittedLayouts:function(){var e={};for(var t in this.layouts)this.layouts[t].committed&&(e[t]=this.layouts[t]);return e},getBlock:function(e,t,n){return this.layouts[e].columns[t].blocks[n]},getCommittedBlocks:function(){var e=[];for(var t in this.layouts)e=$.merge(this.layouts[t].getCommittedBlocks(),e);return e},getInsertedBlocks:function(){var e=[];for(var t in this.layouts)e=$.merge(this.layouts[t].getInsertedBlocks(),e);return e},setBlock:function(e,t,n,r){this.layouts[e].columns[t].blocks[n]=r},insertBlock:function(e,t,n,r){var i=this.layouts[e],s=i.insertBlock(t,n,r);return s},deleteBlock:function(e,t,n){this.layouts[e].deleteBlock(t,n)},moveLayout:function(e,n){var r=this;$.each(this.layouts[n].columns,function(e,t){t.element.data("layoutId",n),t.element.data("container",r.element.data("container")),$.each(t.blocks,function(e,t){t.element.data("layoutId",n),t.element.data("container",r.element.data("container"))})}),t.trigger("layoutMoved",[n])},commitBlocks:function(e,t){this.layouts[e].commitBlocks(t)},hasLayouts:function(){return Object.keys(this.layouts).length>0},moveBlock:function(e,r,i,s,o){var u=this.layouts[e].columns[r].blocks[i],a=n.generateFromHash(this.layouts[s].columns[o].blocks);$.extend(u.element.data(),{layoutId:s,columnId:o,blockId:a}),delete this.layouts[e].columns[r].blocks[i],this.layouts[s].columns[o].blocks[a]=u,t.trigger("blockMoved",[a])},deserialize:function(){var e=this;$(".sl-layout",this.element).each(function(t,n){n=$(n);var r=e.insertLayout({source:n});r.commit(),r.deserialize()})},toJSON:function(){return{layouts:this.layouts,container:this.element.attr("id")}}}}throw new TypeError("Layoutmanager constructor cannot be called as a function.")}return r}),define("app/simplelayout/Toolbar",[],function(){"use strict";function e(t,n,r){if(this instanceof e){var i={},s=$.extend(i,t||{}),o=[];$.each(s,function(e,t){o.push(t)});var u=$.templates("<ul class='sl-toolbar{{if type}}-{{:type}}{{/if}}{{if orientation}} {{:orientation}}{{/if}}'>         {{for actions}}           <li>             <a {{props}} {{>key}}='{{>prop}}' {{/props}}></a>           </li>           <li class='delimiter'></li>         {{/for}}       </ul>"),a=$(u.render({actions:o,orientation:n,type:r}));return{element:a}}throw new TypeError("Toolbar constructor cannot be called as a function.")}return e}),define("app/toolbox/Toolbox",[],function(){"use strict";function e(t){if(this instanceof e){if(!t||!t.layouts||t.layouts.length===0)throw new Error("No layouts defined.");var n=$.extend({components:{}},t||{}),r=function(e,t){return e.localeCompare(t,"de",{caseFirst:"lower"})},i=$.templates("<div id='sl-toolbox' class='sl-toolbox'>           <div class='components'>             <div class='addables'>               <a class='sl-toolbox-header'>Komponenten</a>                 <div class='sl-toolbox-components'>                   {{for components}}                     <a class='sl-toolbox-component' title='{{:description}}' data-type='{{:contentType}}' data-form_url='{{:formUrl}}'>                       <i class='icon-{{:contentType}}'></i>{{:title}}                     </a>                   {{/for}}                 </div>               <a class='sl-toolbox-header'>Layout</a>                 {{props layouts}}                   <a class='sl-toolbox-layout' data-columns='{{>prop}}'>                     <i class='icon-layout'></i>{{>prop}} - Spalten Layout                   </a>                  {{/props}}             </div>             <a class='sl-toolbox-header sl-toolbox-handle'>Toolbox</a>           </div>         </div>"),s=$.map(n.components.addable_blocks,function(e){return e}).sort(function(e,t){return r(e.title,t.title)}),o={components:s,layouts:n.layouts},u=$(i.render(o));return $(".sl-toolbox-handle",u).on("click",function(){$(".addables").toggleClass("close")}),{options:n,element:u,disableComponents:function(){$(".sl-toolbox-components",this.element).addClass("disabled")},enableComponents:function(){$(".sl-toolbox-components",this.element).removeClass("disabled")},attachTo:function(e){e.append(u)}}}throw new TypeError("Toolbox constructor cannot be called as a function.")}return e}),define("app/simplelayout/Simplelayout",["app/simplelayout/Layoutmanager","app/simplelayout/Toolbar","app/toolbox/Toolbox","app/simplelayout/EventEmitter","app/simplelayout/idHelper"],function(e,t,n,r,i){"use strict";function s(o){if(this instanceof s){var u=$.extend({toolbox:new n({layouts:[1,2,4]})},o||{}),a={},f=0,l=function(e,t){var n=e.element.data(),s=a[n.container],o=i.generateFromHash(a[t].layouts);$.extend(e.element.data(),{layoutId:o,container:t}),delete s.layouts[n.layoutId],a[t].layouts[o]=e,a[t].moveLayout(e,o),r.trigger("layoutMoved",[e])},c=function(e,t,n,s){var o=e.element.data(),u={container:t,layoutId:n,columnId:s},f=a[t];delete a[o.container].layouts[o.layoutId].columns[o.columnId].blocks[o.blockId];var l=i.generateFromHash(a[t].layouts[n].columns[s].blocks);u.blockId=l,$.extend(e.element.data(),u),f.setBlock(n,s,l,e),r.trigger("blockMoved",[e])},h=function(){var e=[];for(var t in a)e=$.merge(a[t].getCommittedBlocks(),e);return e},p=function(){var e=[];for(var t in a)e=$.merge(a[t].getInsertedBlocks(),e);return e},d=function(){$.each(h(),function(e,t){t.disableFrame()})},v=function(){$.each(h(),function(e,t){t.enableFrame()})},m={helper:"clone",cursor:"pointer",start:function(){v(),$(this).hasClass("sl-toolbox-component")?$(document.documentElement).addClass("sl-block-dragging"):$(document.documentElement).addClass("sl-layout-dragging")},stop:function(){d(),$(document.documentElement).removeClass("sl-block-dragging sl-layout-dragging")}},g=function(){return $('<div class="draggableHelper"><div>')},y=function(e){e.item.addClass("animated"),setTimeout(function(){e.item.removeClass("animated")},1)},b=!0,w,E={connectWith:".sl-simplelayout",items:".sl-layout",handle:".sl-toolbar-layout .move",placeholder:"layout-placeholder",axis:"y",tolerance:"intersects",forcePlaceholderSize:!0,helper:g,receive:function(e,t){var n=a[$(this).data("container")];if(w)l(w,$(this).data("container")),w=null;else{var r=$(this).find(".ui-draggable"),i=n.insertLayout({columns:t.item.data("columns")});i.element.insertAfter(r),r.remove()}b=!1},remove:function(e,t){w=a[$(this).data("container")].layouts[t.item.data("layoutId")]},start:function(){$(document.documentElement).addClass("sl-layout-dragging"),v(),b=!0},stop:function(e,t){$(document.documentElement).removeClass("sl-layout-dragging"),d(),y(t);if(b){var n=t.item.data(),r=a[n.container],i=r.layouts[n.layoutId];r.moveLayout(i,n.layoutId)}}},S,x={connectWith:".sl-column",placeholder:"block-placeholder",forcePlaceholderSize:!0,handle:".sl-toolbar-block .move",helper:g,tolerance:"pointer",receive:function(e,t){var n=a[$(this).data("container")],r=$(this).data();if(S)c(S,r.container,r.layoutId,r.columnId),S=null;else if(typeof t.item.data("layoutId")=="undefined"){var i=$(this).find(".ui-draggable"),s=t.item.data("type"),o=n.insertBlock(r.layoutId,r.columnId,null,s);o.element.insertAfter(i),i.remove()}b=!1},remove:function(e,t){var n=t.item.data();S=a[n.container].getBlock(n.layoutId,n.columnId,n.blockId)},start:function(){$(document.documentElement).addClass("sl-block-dragging"),b=!0,v()},stop:function(e,t){$(document.documentElement).removeClass("sl-block-dragging"),d(),y(t);if(b){var n=t.item.data(),r=$(this).data();a[n.container].moveBlock(n.layoutId,n.columnId,n.blockId,r.layoutId,r.columnId)}}},T=function(e,t){r.on(e,t)},N=function(){u.toolbox.element.find(".sl-toolbox-component, .sl-toolbox-layout").draggable(m),u.toolbox.element.find(".sl-toolbox-layout").draggable("option","connectToSortable",".sl-simplelayout"),u.toolbox.element.find(".sl-toolbox-component").draggable("option","connectToSortable",".sl-column")},C=function(){$(".sl-simplelayout").sortable(E),$(".sl-column").sortable(x),T("layoutCommitted",function(e){$(".sl-column",e.element).sortable(x)})};return C(),N(),T("layoutInserted",function(e){var n=new t(u.toolbox.options.components.layout_actions,"vertical","layout");e.attachToolbar(n)}),T("blockInserted",function(e){var n=new t(u.toolbox.options.components.addable_blocks[e.type].actions,"horizontal","block");e.attachToolbar(n)}),{options:u,moveLayout:l,moveBlock:c,getManagers:function(){return a},serialize:function(){return JSON.stringify(a)},deserialize:function(e){a={},f=0;var t=this;$(".sl-simplelayout",e).each(function(e,n){var r=t.insertManager({source:n});r.deserialize()})},insertManager:function(t){var n=new e(t);return n.element.data("container",f),a[f]=n,f++,n},getCommittedBlocks:h,getInsertedBlocks:p,attachTo:function(e){$.each(a,function(t,n){n.attachTo(e)})},on:T}}throw new TypeError("Simplelayout constructor cannot be called as a function.")}return s}),!function(e){var t=(0,eval)("this"),n=t.jQuery;"function"==typeof define&&define.amd?define("jsrender",e):"object"==typeof exports?module.exports=n?e(n):function(t){if(t&&!t.fn)throw"Provide jQuery or null";return e(t)}:e(!1)}(function(e){"use strict";function t(e,t){return function(){var n,r=this,i=r.base;return r.base=e,n=t.apply(r,arguments),r.base=i,n}}function n(e,n){return z(n)&&(n=t(e?e._d?e:t(a,e):a,n),n._d=1),n}function r(e,t){for(var r in t.props)xe.test(r)&&(e[r]=n(e[r],t.props[r]))}function i(e){return e}function a(){return""}function o(e){try{throw"dbg breakpoint"}catch(t){}return this.base?this.baseApply(arguments):e}function s(e){ne._dbgMode=e!==!1}function d(t){this.name=(e.link?"JsViews":"JsRender")+" Error",this.message=t||this.name}function p(e,t){var n;for(n in t)e[n]=t[n];return e}function l(e,t,n){return(0!==this||e)&&(ae=e?e.charAt(0):ae,oe=e?e.charAt(1):oe,se=t?t.charAt(0):se,de=t?t.charAt(1):de,pe=n||pe,e="\\"+ae+"(\\"+pe+")?\\"+oe,t="\\"+se+"\\"+de,H="(?:(?:(\\w+(?=[\\/\\s\\"+se+"]))|(?:(\\w+)?(:)|(>)|!--((?:[^-]|-(?!-))*)--|(\\*)))\\s*((?:[^\\"+se+"]|\\"+se+"(?!\\"+de+"))*?)",te.rTag=H+")",H=new RegExp(e+H+"(\\/)?|(?:\\/(\\w+)))"+t,"g"),D=new RegExp("<.*>|([^\\\\]|^)[{}]|"+e+".*"+t)),[ae,oe,se,de,pe]}function u(e,t){t||(t=e,e=void 0);var n,r,i,s,o=this,u=!t||"root"===t;if(e){if(s=o.type===t?o:void 0,!s)if(n=o.views,o._.useKey){for(r in n)if(s=n[r].get(e,t))break}else for(r=0,i=n.length;!s&&i>r;r++)s=n[r].get(e,t)}else if(u)for(;o.parent.parent;)s=o=o.parent;else for(;o&&!s;)s=o.type===t?o:void 0,o=o.parent;return s}function c(){var e=this.get("item");return e?e.index:void 0}function f(){return this.index}function g(e){var t,n=this,r=n.linkCtx,i=(n.ctx||{})[e];return void 0===i&&r&&r.ctx&&(i=r.ctx[e]),void 0===i&&(i=Y[e]),i&&z(i)&&!i._wrp&&(t=function(){return i.apply(this&&this!==B?this:n,arguments)},t._wrp=!0,p(t,i)),t||i}function v(e,t,n,i){var s,o,u="number"==typeof n&&t.tmpl.bnds[n-1],a=t.linkCtx;return void 0!==i?n=i={props:{},args:[i]}:u&&(n=u(t.data,t,Z)),o=n.args[0],(e||u)&&(s=a&&a.tag,s||(s=p(new te._tg,{_:{inline:!a,bnd:u,unlinked:!0},tagName:":",cvt:e,flow:!0,tagCtx:n}),a&&(a.tag=s,s.linkCtx=a),n.ctx=J(n.ctx,(a?a.view:t).ctx)),s._er=i&&o,r(s,n),n.view=t,s.ctx=n.ctx||{},n.ctx=void 0,t._.tag=s,o=s.cvtArgs(s.convert||"true"!==e&&e)[0],o=u&&t._.onRender?t._.onRender(o,t,u):o,t._.tag=void 0),void 0!=o?o:""}function m(e){var t=this,n=t.tagCtx,r=n.view,i=n.args;return e=t.convert||e,e=e&&(""+e===e?r.getRsc("converters",e)||V("Unknown converter: '"+e+"'"):e),i=i.length||n.index?e?i.slice():i:[r.data],e&&(e.depends&&(t.depends=te.getDeps(t.depends,t,e.depends,e)),i[0]=e.apply(t,i)),i}function h(e,t){for(var n,r,i=this;void 0===n&&i;)r=i.tmpl&&i.tmpl[e],n=r&&r[t],i=i.parent;return n||Z[e][t]}function w(e,t,n,i,s,o){t=t||P;var u,a,f,l,c,h,p,d,v,m,g,y,b,w,E,S,x,N,C,k="",L=t.linkCtx||0,A=t.ctx,O=n||t.tmpl,M="number"==typeof i&&t.tmpl.bnds[i-1];for("tag"===e._is?(u=e,e=u.tagName,i=u.tagCtxs,f=u.template):(a=t.getRsc("tags",e)||V("Unknown tag: {{"+e+"}} "),f=a.template),void 0!==o?(k+=o,i=o=[{props:{},args:[]}]):M&&(i=M(t.data,t,Z)),d=i.length,p=0;d>p;p++)m=i[p],(!L||!L.tag||p&&!L.tag._.inline||u._er)&&((y=m.tmpl)&&(y=m.content=O.tmpls[y-1]),m.index=p,m.tmpl=f||y,m.render=T,m.view=t,m.ctx=J(m.ctx,A)),(n=m.props.tmpl)&&(n=""+n===n?t.getRsc("templates",n)||W(n):n,m.tmpl=n),u||(u=new a._ctr,b=!!u.init,u.parent=h=A&&A.tag,u.tagCtxs=i,C=u.dataMap,L&&(u._.inline=!1,L.tag=u,u.linkCtx=L),(u._.bnd=M||L.fn)?u._.arrVws={}:u.dataBoundOnly&&V("{^{"+e+"}} tag must be data-bound")),i=u.tagCtxs,C=u.dataMap,m.tag=u,C&&i&&(m.map=i[p].map),u.flow||(g=m.ctx=m.ctx||{},l=u.parents=g.parentTags=A&&J(g.parentTags,A.parentTags)||{},h&&(l[h.tagName]=h),l[u.tagName]=g.tag=u);if((M||L)&&(t._.tag=u),!(u._er=o)){for(r(u,i[0]),u.rendering={},p=0;d>p;p++)m=u.tagCtx=i[p],x=m.props,S=u.cvtArgs(),(w=x.dataMap||C)&&(S.length||x.dataMap)&&(E=m.map,(!E||E.src!==S[0]||s)&&(E&&E.src&&E.unmap(),E=m.map=w.map(S[0],x,void 0,!u._.bnd)),S=[E.tgt]),u.ctx=m.ctx,p||(b&&(N=u.template,u.init(m,L,u.ctx),b=void 0,u.template!==N&&(u._.tmpl=u.template)),L&&(L.attr=u.attr=L.attr||u.attr),c=u.attr,u._.noVws=c&&c!==je),v=void 0,u.render&&(v=u.render.apply(u,S)),S.length||(S=[t]),void 0===v&&(v=m.render(S.length?S[0]:t,!0)||(s?void 0:"")),k=k?k+(v||""):v;u.rendering=void 0}return u.tagCtx=i[0],u.ctx=u.tagCtx.ctx,u._.noVws&&u._.inline&&(k="text"===c?X.html(k):""),M&&t._.onRender?t._.onRender(k,t,M):k}function b(e,t,n,r,i,s,o,u){var a,f,l,h,p=this,d="array"===t;p.content=o,p.views=d?[]:{},p.parent=n,p.type=t||"top",p.data=r,p.tmpl=i,h=p._={key:0,useKey:d?0:1,id:""+ye++,onRender:u,bnds:{}},p.linked=!!u,n?(a=n.views,f=n._,f.useKey?(a[h.key="_"+f.useKey++]=p,p.index=Re,p.getIndex=c,l=f.tag,h.bnd=d&&(!l||!!l._.bnd&&l)):a.length===(h.key=p.index=s)?a.push(p):a.splice(s,0,p),p.ctx=e||n.ctx):p.ctx=e}function x(e){var t,n,r,i,s,o,u;for(t in Me)if(s=Me[t],(o=s.compile)&&(n=e[t+"s"]))for(r in n)i=n[r]=o(r,n[r],e,0),i._is=t,i&&(u=te.onStore[t])&&u(r,i,o)}function _(e,t,r){function i(){var t=this;t._={inline:!0,unlinked:!0},t.tagName=e}var s,o,u,a=new te._tg;if(z(t)?t={depends:t.depends,render:t}:""+t===t&&(t={template:t}),o=t.baseTag){t.flow=!!t.flow,t.baseTag=o=""+o===o?r&&r.tags[o]||ee[o]:o,a=p(a,o);for(u in t)a[u]=n(o[u],t[u])}else a=p(a,t);return void 0!==(s=a.template)&&(a.template=""+s===s?W[s]||W(s):s),a.init!==!1&&((i.prototype=a).constructor=a._ctr=i),r&&(a._parentTmpl=r),a}function y(e){return this.base.apply(this,e)}function k(t,n,r,i){function s(n){var s,u;if(""+n===n||n.nodeType>0&&(o=n)){if(!o)if(/^\.\/[^\\:*?"<>]*$/.test(n))(u=W[t=t||n])?n=u:o=document.getElementById(n);else if(e.fn&&!D.test(n))try{o=e(document).find(n)[0]}catch(a){}o&&(i?n=o.innerHTML:(s=o.getAttribute(Ae),s?s!==Te?(n=W[s],delete W[s]):e.fn&&(n=e.data(o)[Te]):(t=t||(e.fn?Te:n),n=k(t,o.innerHTML,r,i)),n.tmplName=t=t||s,t!==Te&&(W[t]=n),o.setAttribute(Ae,t),e.fn&&e.data(o,Te,n))),o=void 0}else n.fn||(n=void 0);return n}var o,u,a=n=n||"";return 0===i&&(i=void 0,a=s(a)),i=i||(n.markup?n:{}),i.tmplName=t,r&&(i._parentTmpl=r),!a&&n.markup&&(a=s(n.markup))&&a.fn&&(a=a.markup),void 0!==a?(a.fn||n.fn?a.fn&&(u=a):(n=C(a,i),$(a.replace(ge,"\\$&"),n)),u||(x(i),u=p(function(){return n.render.apply(n,arguments)},n)),t&&!r&&t!==Te&&(Ve[t]=u),u):void 0}function j(e){function t(t,n){this.tgt=e.getTgt(t,n)}return z(e)&&(e={getTgt:e}),e.baseMap&&(e=p(p({},e.baseMap),e)),e.map=function(e,n){return new t(e,n)},e}function C(t,n){var r,i=ne.wrapMap||{},s=p({tmpls:[],links:{},bnds:[],_is:"template",render:T},n);return s.markup=t,n.htmlTag||(r=he.exec(t),s.htmlTag=r?r[1].toLowerCase():""),r=i[s.htmlTag],r&&r!==i.div&&(s.markup=e.trim(s.markup)),s}function A(e,t){function n(i,s,o){var u,a,f,l;if(i&&typeof i===Ce&&!i.nodeType&&!i.markup&&!i.getTgt){for(f in i)n(f,i[f],s);return Z}return void 0===s&&(s=i,i=void 0),i&&""+i!==i&&(o=s,s=i,i=void 0),l=o?o[r]=o[r]||{}:n,a=t.compile,null===s?i&&delete l[i]:(s=a?a(i,s,o,0):s,i&&(l[i]=s)),a&&s&&(s._is=e),s&&(u=te.onStore[e])&&u(i,s,a),s}var r=e+"s";Z[r]=n}function T(e,t,n,r,i,s){var o,u,a,f,l,c,h,p,d=r,v="";if(t===!0?(n=t,t=void 0):typeof t!==Ce&&(t=void 0),(a=this.tag)?(l=this,f=a._.tmpl||l.tmpl,d=d||l.view,arguments.length||(e=d)):f=this,f){if(!d&&e&&"view"===e._is&&(d=e),d&&e===d&&(e=d.data),f.fn||(f=a._.tmpl=W[f]||W(f)),c=!d,re=re||c,d||((t=t||{}).root=e),!re||ne.useViews||f.useViews||d&&d!==P)v=R(f,e,t,n,d,i,s,a);else{if(d?(h=d.data,p=d.index,d.index=Re):(d=P,d.data=e,d.ctx=t),G(e)&&!n)for(o=0,u=e.length;u>o;o++)d.index=o,d.data=e[o],v+=f.fn(e[o],d,Z);else v+=f.fn(e,d,Z);d.data=h,d.index=p}c&&(re=void 0)}return v}function R(e,t,n,r,i,s,o,u){function a(e){E=p({},n),E[w]=e}var f,l,c,h,d,v,m,g,y,w,E,S,x="";if(u&&(y=u.tagName,S=u.tagCtx,n=n?J(n,u.ctx):u.ctx,m=S.content,S.props.link===!1&&(n=n||{},n.link=!1),(w=S.props.itemVar)&&("~"!==w.charAt(0)&&M("Use itemVar='~myItem'"),w=w.slice(1))),i&&(m=m||i.content,o=o||i._.onRender,n=n||i.ctx),s===!0&&(v=!0,s=0),o&&(n&&n.link===!1||u&&u._.noVws)&&(o=void 0),g=o,o===!0&&(g=void 0,o=i._.onRender),n=e.helpers?J(e.helpers,n):n,E=n,G(t)&&!r)for(c=v?i:void 0!==s&&i||new b(n,"array",i,t,e,s,m,o),w&&(c.it=w),w=c.it,f=0,l=t.length;l>f;f++)w&&a(t[f]),h=new b(E,"item",c,t[f],e,(s||0)+f,m,o),d=e.fn(t[f],h,Z),x+=c._.onRender?c._.onRender(d,h):d;else w&&a(t),c=v?i:new b(E,y||"data",i,t,e,s,m,o),u&&!u.flow&&(c.tag=u),x+=e.fn(t,c,Z);return g?g(x,c):x}function V(e,t,n){var r=ne.onError(e,t,n);if(""+e===e)throw new te.Err(r);return!t.linkCtx&&t.linked?X.html(r):r}function M(e){V("Syntax error\n"+e)}function $(e,t,n,r,i){function s(t){t-=p,t&&v.push(e.substr(p,t).replace(ce,"\\n"))}function o(t,n){t&&(t+="}}",M((n?"{{"+n+"}} block has {{/"+t+" without {{"+t:"Unmatched or missing {{/"+t)+", in template:\n"+e))}function u(u,a,h,y,b,w,x,T,N,C,k,L){w&&(b=":",y=je),C=C||n&&!i;var A=(a||n)&&[[]],O="",_="",D="",P="",H="",B="",j="",F="",I=!C&&!b&&!x;h=h||(N=N||"#data",b),s(L),p=L+u.length,T?c&&v.push(["*","\n"+N.replace(/^:/,"ret+= ").replace(fe,"$1")+";\n"]):h?("else"===h&&(me.test(N)&&M('for "{{else if expr}}" use "{{else expr}}"'),A=m[7]&&[[]],m[8]=e.substring(m[8],L),m=d.pop(),v=m[2],I=!0),N&&S(N.replace(ce," "),A,t).replace(ve,function(e,t,n,r,i,s,o,u){return r="'"+i+"':",o?(_+=s+",",P+="'"+u+"',"):n?(D+=r+s+",",B+=r+"'"+u+"',"):t?j+=s:("trigger"===i&&(F+=s),O+=r+s+",",H+=r+"'"+u+"',",l=l||xe.test(i)),""}).slice(0,-1),A&&A[0]&&A.pop(),f=[h,y||!!r||l||"",I&&[],E(P,H,B),E(_,O,D),j,F,A||0],v.push(f),I&&(d.push(m),m=f,m[8]=p)):k&&(o(k!==m[0]&&"else"!==m[0]&&k,m[0]),m[8]=e.substring(m[8],L),m=d.pop()),o(!m&&k),v=m[2]}var a,f,l,c=ne.allowCode||t&&t.allowCode,h=[],p=0,d=[],v=h,m=[,,h];return c&&(t.allowCode=c),n&&(e=ae+e+de),o(d[0]&&d[0][2].pop()[0]),e.replace(H,u),s(e.length),(p=h[h.length-1])&&o(""+p!==p&&+p[8]===p[8]&&p[0]),n?(a=I(h,e,n),N(a,[h[0][7]])):a=I(h,t),a}function N(e,t){var n,r,i=0,s=t.length;for(e.deps=[];s>i;i++){r=t[i];for(n in r)"_jsvto"!==n&&r[n].length&&(e.deps=e.deps.concat(r[n]))}e.paths=r}function E(e,t,n){return[e.slice(0,-1),t.slice(0,-1),n.slice(0,-1)]}function F(e,t){return"\n	"+(t?t+":{":"")+"args:["+e[0]+"]"+(e[1]||!t?",\n	props:{"+e[1]+"}":"")+(e[2]?",\n	ctx:{"+e[2]+"}":"")}function S(e,t,n){function r(r,y,b,w,E,S,x,T,N,C,k,L,A,O,_,D,P,H,B,j){function F(e,n,r,o,u,a,c,h){var p="."===r;if(r&&(E=E.slice(n.length),p||(e=(o?'view.hlp("'+o+'")':u?"view":"data")+(h?(a?"."+a:o?"":u?"":"."+r)+(c||""):(h=o?"":u?a||"":r,"")),e+=h?"."+h:"",e=n+("view.data"===e.slice(0,9)?e.slice(5):e)),f)){if(R="linkTo"===i?s=t._jsvto=t._jsvto||[]:l.bd,U=p&&R[R.length-1]){if(U._jsv){for(;U.sb;)U=U.sb;U.bnd&&(E="^"+E.slice(1)),U.sb=E,U.bnd=U.bnd||"^"===E.charAt(0)}}else R.push(E);m[d]=B+(p?1:0)}return e}w=f&&w,w&&!T&&(E=w+E),S=S||"",b=b||y||L,E=E||N,C=C||P||"";var I,q,R,U,z;if(!x||a||u){if(f&&D&&!a&&!u&&(!i||o||s)&&(I=m[d-1],j.length-1>B-(I||0))){if(I=j.slice(I,B+r.length),q!==!0)if(R=s||c[d-1].bd,U=R[R.length-1],U&&U.prm){for(;U.sb&&U.sb.prm;)U=U.sb;z=U.sb={path:U.sb,bnd:U.bnd}}else R.push(z={path:R.pop()});D=oe+":"+I+" onerror=''"+se,q=p[D],q||(p[D]=!0,p[D]=q=$(D,n,!0)),q!==!0&&z&&(z._jsv=q,z.prm=l.bd,z.bnd=z.bnd||z.path&&z.path.indexOf("^")>=0)}return a?(a=!A,a?r:L+'"'):u?(u=!O,u?r:L+'"'):(b?(m[d]=B++,l=c[++d]={bd:[]},b):"")+(H?d?"":(h=j.slice(h,B),(i?(i=o=s=!1,"\b"):"\b,")+h+(h=B+r.length,f&&t.push(l.bd=[]),"\b")):T?(d&&M(e),f&&t.pop(),i=E,o=w,h=B+r.length,w&&(f=l.bd=t[i]=[]),E+":"):E?E.split("^").join(".").replace(le,F)+(C?(l=c[++d]={bd:[]},v[d]=!0,C):S):S?S:_?(v[d]=!1,l=c[--d],_+(C?(l=c[++d],v[d]=!0,C):"")):k?(v[d]||M(e),","):y?"":(a=A,u=O,'"'))}M(e)}var i,s,o,u,a,f=t&&t[0],l={bd:f},c={0:l},h=0,p=n?n.links:f&&(f.links=f.links||{}),d=0,v={},m={};return(e+(n?" ":"")).replace(ue,r)}function I(e,t,n){var r,i,s,o,u,a,f,l,c,h,p,d,v,m,g,y,b,w,E,S,x,T,k,L,A,O,_,D,P,H,B=0,j=ne.useViews||t.useViews||t.tags||t.templates||t.helpers||t.converters,q="",R={},U=e.length;for(""+t===t?(w=n?'data-link="'+t.replace(ce," ").slice(1,-1)+'"':t,t=0):(w=t.tmplName||"unnamed",t.allowCode&&(R.allowCode=!0),t.debug&&(R.debug=!0),p=t.bnds,b=t.tmpls),r=0;U>r;r++)if(i=e[r],""+i===i)q+='\n+"'+i+'"';else if(s=i[0],"*"===s)q+=";\n"+i[1]+"\nret=ret";else{if(o=i[1],x=!n&&i[2],u=F(i[3],"params")+"},"+F(v=i[4]),D=i[5],H=i[6],T=i[8]&&i[8].replace(fe,"$1"),(A="else"===s)?d&&d.push(i[7]):(B=0,p&&(d=i[7])&&(d=[d],B=p.push(1))),j=j||v[1]||v[2]||d||/view.(?!index)/.test(v[0]),(O=":"===s)?o&&(s=o===je?">":o+s):(x&&(E=C(T,R),E.tmplName=w+"/"+s,E.useViews=E.useViews||j,I(x,E),j=E.useViews,b.push(E)),A||(S=s,j=j||s&&(!ee[s]||!ee[s].flow),L=q,q=""),k=e[r+1],k=k&&"else"===k[0]),P=D?";\ntry{\nret+=":"\n+",m="",g="",O&&(d||H||o&&o!==je)){if(_="return {"+u+"};",y='c("'+o+'",view,',_=new Function("data,view,j,u"," // "+w+" "+B+" "+s+"\n"+_),_._er=D,m=y+B+",",g=")",_._tag=s,n)return _;N(_,d),h=!0}if(q+=O?(n?(D?"\ntry{\n":"")+"return ":P)+(h?(h=void 0,j=c=!0,y+(d?(p[B-1]=_,B):"{"+u+"}")+")"):">"===s?(f=!0,"h("+v[0]+")"):(l=!0,"((v="+(v[0]||"data")+')!=null?v:"")')):(a=!0,"\n{view:view,tmpl:"+(x?b.length:"0")+","+u+"},"),S&&!k){if(q="["+q.slice(0,-1)+"]",y='t("'+S+'",view,this,',n||d){if(q=new Function("data,view,j,u"," // "+w+" "+B+" "+S+"\nreturn "+q+";"),q._er=D,q._tag=S,d&&N(p[B-1]=q,d),n)return q;m=y+B+",undefined,",g=")"}q=L+P+y+(B||q)+")",d=0,S=0}D&&(j=!0,q+=";\n}catch(e){ret"+(n?"urn ":"+=")+m+"j._err(e,view,"+D+")"+g+";}\n"+(n?"":"ret=ret"))}q="// "+w+"\nvar v"+(a?",t=j._tag":"")+(c?",c=j._cnvt":"")+(f?",h=j.converters.html":"")+(n?";\n":',ret=""\n')+(R.debug?"debugger;":"")+q+(n?"\n":";\nreturn ret;"),ne._dbgMode&&(q="try {\n"+q+"\n}catch(e){\nreturn j._err(e, view);\n}");try{q=new Function("data,view,j,u",q)}catch(z){M("Compiled template code:\n\n"+q+'\n: "'+z.message+'"')}return t&&(t.fn=q,t.useViews=!!j),q}function J(e,t){return e&&e!==t?t?p(p({},t),e):e:t&&p({},t)}function U(e){return ke[e]||(ke[e]="&#"+e.charCodeAt(0)+";")}function K(e){var t,n,r=[];if(typeof e===Ce)for(t in e)n=e[t],n&&n.toJSON&&!n.toJSON()||z(n)||r.push({key:t,prop:n});return r}function O(t,n,r){var i=this.jquery&&(this[0]||V('Unknown template: "'+this.selector+'"')),s=i.getAttribute(Ae);return T.call(s?e.data(i)[Te]:W(i),t,n,r)}function q(e){return void 0!=e?be.test(e)&&(""+e).replace(_e,U)||e:""}var B=(0,eval)("this"),L=e===!1;e=e&&e.fn?e:B.jQuery;var Q,H,D,P,Z,z,G,W,X,Y,ee,te,ne,re,ie="v1.0.0-beta",ae="{",oe="{",se="}",de="}",pe="^",le=/^(!*?)(?:null|true|false|\d[\d.]*|([\w$]+|\.|~([\w$]+)|#(view|([\w$]+))?)([\w$.^]*?)(?:[.[^]([\w$]+)\]?)?)$/g,ue=/(\()(?=\s*\()|(?:([([])\s*)?(?:(\^?)(!*?[#~]?[\w$.^]+)?\s*((\+\+|--)|\+|-|&&|\|\||===|!==|==|!=|<=|>=|[<>%*:?\/]|(=))\s*|(!*?[#~]?[\w$.^]+)([([])?)|(,\s*)|(\(?)\\?(?:(')|("))|(?:\s*(([)\]])(?=\s*[.^]|\s*$|[^\(\[])|[)\]])([([]?))|(\s+)/g,ce=/[ \t]*(\r\n|\n|\r)/g,fe=/\\(['"])/g,ge=/['"\\]/g,ve=/(?:\x08|^)(onerror:)?(?:(~?)(([\w$_\.]+):)?([^\x08]+))\x08(,)?([^\x08]+)/gi,me=/^if\s/,he=/<(\w+)[>\s]/,we=/[\x00`><"'&]/g,be=/[\x00`><\"'&]/,xe=/^on[A-Z]|^convert(Back)?$/,_e=we,ye=0,ke={"&":"&amp;","<":"&lt;",">":"&gt;","\0":"&#0;","'":"&#39;",'"':"&#34;","`":"&#96;"},je="html",Ce="object",Ae="data-jsv-tmpl",Te="jsvTmpl",Re="For #index in nested block use #getIndex().",Ve={},Me={template:{compile:k},tag:{compile:_},helper:{},converter:{}},$e=B.jsrender,Ne=$e&&e&&!e.render;if(Z={jsviews:ie,settings:function(e){p(ne,e),s(ne._dbgMode),ne.jsv&&ne.jsv()},sub:{View:b,Err:d,tmplFn:$,parse:S,extend:p,syntaxErr:M,onStore:{},_ths:r,_tg:function(){}},map:j,_cnvt:v,_tag:w,_err:V},(d.prototype=new Error).constructor=d,c.depends=function(){return[this.get("item"),"index"]},f.depends="index",b.prototype={get:u,getIndex:f,getRsc:h,hlp:g,_is:"view"},!($e||e&&e.render)){for(Q in Me)A(Q,Me[Q]);W=Z.templates,X=Z.converters,Y=Z.helpers,ee=Z.tags,te=Z.sub,ne=Z.settings,te._tg.prototype={baseApply:y,cvtArgs:m},P=te.topView=new b,e?(e.fn.render=O,e.observable&&(p(te,e.views.sub),Z.map=e.views.map)):(e={},L&&(B.jsrender=e),e.renderFile=e.__express=e.compile=function(){throw"Node.js: use npm jsrender, or jsrender-node.js"},e.isFunction=function(e){return"function"==typeof e},e.isArray=Array.isArray||function(e){return"[object Array]"==={}.toString.call(e)},e.toJq=function(t){e!==t&&(p(t,this),e=t,e.fn.render=O)},e.jsrender=ie),z=e.isFunction,G=e.isArray,e.render=Ve,e.views=Z,e.templates=W=Z.templates,Z.compile=function(e,t){return t=t||{},t.markup=e,W(t)},ne({debugMode:s,delimiters:l,onError:function(e,t,n){return t&&(e=void 0===n?"{Error: "+(e.message||e)+"}":z(n)?n(e,t):n),void 0==e?"":e},_dbgMode:!1}),ee({"if":{render:function(e){var t=this,n=t.tagCtx,r=t.rendering.done||!e&&(arguments.length||!n.index)?"":(t.rendering.done=!0,t.selected=n.index,n.render(n.view,!0));return r},flow:!0},"for":{render:function(e){var t,n=!arguments.length,r=this,i=r.tagCtx,s="",o=0;return r.rendering.done||(t=n?i.view.data:e,void 0!==t&&(s+=i.render(t,n),o+=G(t)?t.length:1),(r.rendering.done=o)&&(r.selected=i.index)),s},flow:!0},props:{baseTag:"for",dataMap:j(K),flow:!0},include:{flow:!0},"*":{render:i,flow:!0},":*":{render:i,flow:!0},dbg:Y.dbg=X.dbg=o}),X({html:q,attr:q,url:function(e){return void 0!=e?encodeURI(""+e):null===e?e:""}}),l()}return Ne&&$e.toJq(e),e||$e}),require.config({baseUrl:"js/lib/",paths:{app:"../app",EventEmitter:"eventEmitter/EventEmitter.min",jquery:"jquery/dist/jquery",jqueryui:"jquery-ui/ui/minified/jquery-ui.custom.min",jsrender:"jsrender/jsrender.min"},shim:{jsrender:{deps:["jquery"],exports:"jQuery.fn.template"},jqueryui:{deps:["jquery"]}}}),define("app",["app/simplelayout/Simplelayout","app/toolbox/Toolbox","app/simplelayout/EventEmitter","jsrender"],function(e,t){"use strict";return{simplelayout:e,toolbox:t}}),require("app")});